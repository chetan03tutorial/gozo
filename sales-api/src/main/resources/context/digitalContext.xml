<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:util="http://www.springframework.org/schema/util"
	xmlns:aop="http://www.springframework.org/schema/aop"
        xmlns:http-conf="http://cxf.apache.org/transports/http/configuration"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd 
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
		http://cxf.apache.org/transports/http/configuration http://cxf.apache.org/schemas/configuration/http-conf.xsd">

    <context:component-scan base-package="com.lbg.ib.api.sales.*, com.lbg.ib.api.shared.*, com.lbg.ib.api.sso.*">
    	<!--<context:exclude-filter type="regex" expression="com.lbg.ib.api.sales.docupload.*"/>-->
    </context:component-scan>

    <import resource="beans-filter.xml" />
    <import resource="digital-beans-dao.xml"/>
    <aop:aspectj-autoproxy/>

    <http-conf:conduit id="httpConduit"
			name="{http://service.rs}MyService.http-conduit">
        <http-conf:client ConnectionTimeout="3000000" ReceiveTimeout="30000000" />
    </http-conf:conduit>

<!-- 	<jaxrs:client id="webClient" xmlns:s="http://service.rs"
         address="http://local:80/involvedParty/AccountsStub"
         serviceClass="org.apache.cxf.jaxrs.client.WebClient">
         <jaxrs:headers>
             <entry key="Accept" value="text/json"/>
         </jaxrs:headers>
		 <jaxrs:providers>
	        <bean class="org.codehaus.jackson.jaxrs.JacksonJsonProvider">
	            <property name="mapper" ref="jacksonObjectMapper" />
	        </bean>
        </jaxrs:providers>
    </jaxrs:client> -->

	<bean id="jsonProvider" class="org.codehaus.jackson.jaxrs.JacksonJsonProvider"/>
	<util:list id="webClientProviders"> 
	    <ref bean="jsonProvider"/> 
	</util:list>
	<bean id="webClient" class="org.apache.cxf.jaxrs.client.WebClient"  factory-method="create">
		<constructor-arg type="java.lang.String" value="" />
		<constructor-arg ref="webClientProviders" />
	</bean>
    <!--
    <bean id="productHoldingDAO" class="com.lbg.ib.api.sales.dao.product.holding.ProductHoldingDAOImpl">
	   <property name="webClient" ref="webClient" />
    </bean>-->

    <bean class="org.apache.cxf.jaxrs.spring.JAXRSServerFactoryBeanDefinitionParser$SpringJAXRSServerFactoryBean"
          init-method="init">
        <property name="serviceBeans">
            <list>
                <!--<bean class="com.lbg.ib.api.sales.product.resources.ProductPartySegmentResource"/>-->
                <bean class="com.lbg.ib.api.sales.product.resources.ProductFeaturesResource"/>
                <bean class="com.lbg.ib.api.sales.product.resources.ProductArrangementResource"/>
                <bean class="com.lbg.ib.api.sales.address.resources.AddressResource"/>
                <bean class="com.lbg.ib.api.sales.product.resources.ProductActivationResource"/>
                <bean class="com.lbg.ib.api.sales.content.resources.ContentResource"/>
                <bean class="com.lbg.ib.api.sales.content.resources.ContentManagerResource"/>
                <bean class="com.lbg.ib.api.sales.product.resources.ProductContentResource"/>
                <bean class="com.lbg.ib.api.sales.mandate.resources.ValidateUserIdResource"/>
                <bean class="com.lbg.ib.api.sales.party.resources.TinDetailsResource"/>
                <bean class="com.lbg.ib.api.sales.communication.resources.CommunicationPartyResource"/>
                <bean class="com.lbg.ib.api.sales.paperless.resources.PaperlessResource"/>
                <bean class="com.lbg.ib.api.sso.resource.ValidateSAMLTokenResource"/>
                <bean class="com.lbg.ib.api.sales.user.resources.UserResource"/>
                <bean class="com.lbg.ib.api.sales.questionnaire.resource.QuestionnaireResource"/>
	            <bean class="com.lbg.ib.api.sales.product.resources.DetermineEligibilityResource"/>
				<bean class="com.lbg.ib.api.sales.visualmi.resources.VisualMIResource"/>
				<bean class="com.lbg.ib.api.sales.bankwizard.resources.ValidateAccountResource" />
				<bean class="com.lbg.ib.api.sales.common.session.resource.PackageAccountSessionInfoResource" />
				<bean class="com.lbg.ib.api.sales.communication.resources.CommunicationResource" />
                <bean class="com.lbg.ib.api.sales.party.resources.RetrievePartyDetailsResource" />
                <bean class="com.lbg.ib.api.sales.product.resources.UpgradeEligibilityResource" />
                <bean class="com.lbg.ib.api.sales.conversion.resource.ConversionResource"/>
                <!--<bean class="com.lbg.ib.api.sales.idassertion.resource.IdentityAssertionResource"/>-->
                <bean class="com.lbg.ib.api.sales.common.session.resource.UpgradeEligibilitySessionInfoResource"/>
                <bean class="com.lbg.ib.api.sales.party.resources.SearchPartyResource" />
                <bean class="com.lbg.ib.api.sales.common.resource.BankHolidayResource"/>
                <bean class="com.lbg.ib.api.sales.switching.resources.AccountSwitchingResource" />
                <bean class="com.lbg.ib.api.sales.application.ApplicationResource" />
                <bean class="com.lbg.ib.api.sales.overdraft.resource.PcciOverdraftResource" />
                <bean class="com.lbg.ib.api.sso.logoff.LogoutResource"/>
                <bean class="com.lbg.ib.api.sales.product.resources.WorkingDaysResource"/>
                <bean class="com.lbg.ib.api.sales.docgen.resource.DocGenAndSaveResource"/>
                <bean class="com.lbg.ib.api.sales.docupload.service.impl.CaseDetailsServiceImpl" />
                <bean class="com.lbg.ib.api.sales.overdraft.resource.OverdraftResource"/>
                <bean class="com.lbg.ib.api.sales.overdraft.resource.UpfrontOverdraftResource"/>
                <bean class="com.lbg.ib.api.sales.asm.resource.C078Resource"/>
                <bean class="com.lbg.ib.api.sales.overdraft.resource.SelectedAccountSessionInfoResource"/>
            </list>
        </property>
        <property name="providers">
            <list>
                <bean class="org.codehaus.jackson.jaxrs.JacksonJsonProvider"/>
                <ref bean="exceptionToMessageMapper"/>
                <ref bean="invalidFormatExceptionToMessageMapper"/>
                <ref bean="serviceExceptionToMessageMapper"/>
                <ref bean="debugLoggerFilter"/>
                <ref bean="serviceErrorHandler"/>
            </list>
        </property>
        <property name="extensionMappings">
            <map>
                <entry key="json" value="application/json"/>
            </map>
        </property>
    </bean>
     <bean id="jacksonObjectMapper" class="org.codehaus.jackson.map.ObjectMapper">
	    <property name="serializationInclusion" value="NON_NULL"/>
	</bean> 
</beans>


